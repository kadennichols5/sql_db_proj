CREATE TABLE PHARMACY(CODE NUMBER, 
NAME VARCHAR(30) NOT NULL, 
ADDRESS VARCHAR(30) NOT NULL,
PHONE_NUMBER VARCHAR(15) NOT NULL,
EMAIL VARCHAR(30) NOT NULL,
SCHEDULE_CODE VARCHAR(12) NOT NULL,
CATALOGUE_CODE VARCHAR(12) NOT NULL);

CREATE TABLE PHONE(PHARMACY_CODE NUMBER NOT NULL, NUMBER VARCHAR(15) NOT NULL);

CREATE TABLE EMPLOYEE(DNI VARCHAR(15) NOT NULL,
NAME VARCHAR(15) NOT NULL,
LASTNAME VARCHAR(20) NOT NULL, 
BIRTHDATE DATE NOT NULL,
SSN VARCHAR(15) NOT NULL, 
SHIFT_CODE VARCHAR(12)NOT NULL,
SUPER_SSN VARCHAR(15) ,
PHARMACY_CODE NUMBER NOT NULL,
CREATE CONSTRAINT PK_EMP PRIMARY KEY (SSN));

CREATE TABLE SHIFT(CODE VARCHAR(15) , NAME VARCHAR(30) NOT NULL, START TIMESTAMP NOT NULL, END TIMESTAMP NOT NULL);

CREATE TABLE SCHEDULE(CODE VARCHAR(15) , NAME VARCHAR(30) NOT NULL, START TIMESTAMP NOT NULL, END TIMESTAMP NOT NULL);

CREATE TABLE MEDICINE(
CODE VARCHAR(12) NOT NULL,
LAB_NAME VARCHAR(30) NOT NULL, 
COMMERCIAL_BRAND VARCHAR(30),
TYPE_EXCIPIENT NUMBER,
UNIT_VERSION VARCHAR(12),
TYPE_ADMIN_CODE NUMERIC NOT NULL
);

CREATE TABLE TYPE_ADMINISTRATION(CODE NUMERIC NOT NULL, NAME CHAR(15) NOT NULL);

CREATE TABLE TYPE_EXCIPIENT(CODE NUMERIC NOT NULL, NAME CHAR(20) NOT NULL, FORMAT CHAR(15) NOT NULL);

CREATE TABLE LABORATORY(
NAME VARCHAR(30) , 
PHONE_CODE Varchar(15) NOT NULL,
ADDRESS VARCHAR(30) NOT NULL,
WEBPAGE VARCHAR(30) NOT NULL
);

CREATE TABLE MEDICINE_TYPE_EXCIPIENT(
TYPE_EXCIPIENT CHAR(12) NOT NULL,
MEDICINE_CODE VARCHAR(12) NOT NULL);

CREATE TABLE STOCK(CODE VARCHAR(12) NOT NULL, 
PHARMACY_CODE NUMBER NOT NULL, 
MEDICINE_CODE VARCHAR(12) NOT NULL,
QUANTITY NUMBER);

CREATE TABLE MEDICINE_ACTIVE_INGREDIENTS(
MEDICINE_CODE VARCHAR(12) NOT NULL,
ACTIVE_INGREDIENT_CODE VARCHAR(12) NOT NULL
);

CREATE TABLE ACTIVE_INGREDIENTS(
CODE VARCHAR(12) NOT NULL,
NAME CHAR(15) NOT NULL);


CREATE TABLE DISTRIBUTOR(
CIF NUMBER ,
"NAME" VARCHAR(30) NOT NULL,
WEBPAGE VARCHAR(30) NOT NULL
);


CREATE TABLE "ORDER"(
PHARMACY_CODE NUMBER,
MEDICINE_CODE VARCHAR(12) ,
DISTRIBUTOR_CIF NUMBER , 
ORDER_DATE DATE ,
QUANTITY NUMBER NOT NULL,
DELIVERY_DATE DATE , 
EMPLOYEE_CODE VARCHAR(15) 
);

CREATE TABLE CATALOGUE(CODE VARCHAR(12));

CREATE TABLE PRODUCT(
CODE NUMERIC NOT NULL, 
CATEGORY CHAR(15) NOT NULL,
NAME VARCHAR(30) NOT NULL,
DESCRIPTION LONG NOT NULL,
DISTRIBUTOR_CODE NUMERIC NOT NULL, 
CATALOGUE_CODE VARCHAR(12) NOT NULL
);

CREATE TABLE PRODUCT_COMPANY(PRODUCT_CODE NUMERIC NOT NULL, COMPANY_CODE NUMERIC NOT NULL);

CREATE TABLE COMPANY(CIF NUMERIC NOT NULL, NAME VARCHAR(30) NOT NULL, WEBPAGE VARCHAR(30) NOT NULL);

ALTER TABLE PHARMACY ADD CONSTRAINT PK_PHARM PRIMARY KEY(CODE);
ALTER TABLE PHONE ADD CONSTRAINT PK_PHONE PRIMARY KEY ("NUMBER");
ALTER TABLE SCHEDULE ADD CONSTRAINT PK_SCHED PRIMARY KEY (CODE);
ALTER TABLE SHIFT ADD CONSTRAINT PK_SHIFT PRIMARY KEY (CODE);
ALTER TABLE MEDICINE ADD CONSTRAINT PK_MED PRIMARY KEY (CODE);
ALTER TABLE TYPE_ADMINISTRATION ADD CONSTRAINT PK_TYPE_ADMIN PRIMARY KEY (CODE);
ALTER TABLE TYPE_EXCIPIENT ADD CONSTRAINT PK_TYPE_EXCIP PRIMARY KEY(CODE);
ALTER TABLE LABORATORY ADD CONSTRAINT PK_LAB PRIMARY KEY (NAME);
ALTER TABLE MEDICINE_TYPE_EXCIPIENT ADD CONSTRAINT PK_MED_TYPE_EXCIP PRIMARY KEY (TYPE_EXCIPIENT, MEDICINE_CODE);
ALTER TABLE STOCK ADD CONSTRAINT PK_STOCK PRIMARY KEY(CODE);
ALTER TABLE MEDICINE_ACTIVE_INGREDIENTS ADD CONSTRAINT PK_MED_ACT_ING PRIMARY KEY (MEDICINE_CODE, ACTIVE_INGREDIENT_CODE);
ALTER TABLE ACTIVE_INGREDIENTS ADD CONSTRAINT PK_ACT_ING PRIMARY KEY (CODE);
ALTER TABLE DISTRIBUTOR ADD CONSTRAINT PK_DISTRIB PRIMARY KEY (CIF);
ALTER TABLE ORDER ADD CONSTRAINT PK_ORDER PRIMARY KEY (PHARMACY_CODE, MEDICINE_CODE, DISTRIBUTOR_CIF, ORDER_DATE);
ALTER TABLE CATALOGUE ADD CONSTRAINT PK_CATALOGUE PRIMARY KEY (CODE);
ALTER TABLE PRODUCT ADD CONSTRAINT PK_PROD PRIMARY KEY (CODE);
ALTER TABLE PRODUCT_COMPANY ADD CONSTRAINT PK_PROD_COMP PRIMARY KEY (PRODUCT_CODE, COMPANY_CODE);
ALTER TABLE COMPANY ADD CONSTRAINT PK_COMP PRIMARY KEY(CIF);


ALTER TABLE TYPE_ADMINISTRATION ADD CONSTRAINT CHECK_ADMIN_NAME CHECK ("NAME" in ('Orally', 'Intravenous'));
ALTER TABLE TYPE_EXCIPIENT ADD CONSTRAINT CHECK_TYPE_EXCIP CHECK ("FORMAT" in ('Capsule','Tablet','Pill','Cream','Spray','Syrup'));
ALTER TABLE SHIFT ADD CONSTRAINT CHECK_SHIFT_NAME CHECK (NAME in (Morning, Afternoon));












